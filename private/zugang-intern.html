<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Privater Bereich – Login</title>
  <link rel="stylesheet" href="../css/styles.css" />
  <link rel="stylesheet" href="../css/intern.css" />  
</head>
<body>
  <div class="login-box">
    <h2>Privater Bereich</h2>
    <p>Authentifiziere dich mit Fingerabdruck:</p>
    <button onclick="authenticate()">Fingerabdruck-Login</button>
    <p id="status"></p>
  </div>

  <script>
    async function authenticate() {
      const status = document.getElementById("status");

      if (!window.PublicKeyCredential) {
        status.innerText = "Dein Browser unterstützt keine WebAuthn.";
        return;
      }

      try {
        const options = {
          publicKey: {
            challenge: new Uint8Array([1,2,3,4]),
            allowCredentials: [],
            timeout: 60000,
            userVerification: "preferred"
          }
        };

        const credential = await navigator.credentials.get(options);

        if (credential) {
          status.innerText = "Zugriff gewährt. Weiterleitung...";
          setTimeout(() => {
            window.location.href = "head.html";
          }, 1500);
        }
      } catch (err) {
        console.error(err);
        status.innerText = "Authentifizierung fehlgeschlagen.";
      }
    }
  </script>
</body>
</html>